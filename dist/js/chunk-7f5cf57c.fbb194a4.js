(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f5cf57c"],{"0a99":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"Me"},[a("myNav",{attrs:{ceiling:t.ceiling}}),t._m(0),a("main",[a("div",{staticClass:"myInfo"},[a("h1",[t._v("我的信息")]),a("div",{staticClass:"MyInfo"},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-date"}),t._v(" 我的提问")]),t._l(t.personIssueData,(function(e){return a("article",{key:e["id"]},[a("router-link",{attrs:{to:"/question/"+e["id"]}},[a("h5",[1==e.status?a("span",[a("i",{staticClass:"el-icon-warning"})]):2==e.status?a("span",[a("i",{staticClass:"el-icon-error"})]):3==e.status?a("span",[a("i",{staticClass:"el-icon-success"})]):t._e(),t._v("\n                                    "+t._s(e["question"])+"\n                                ")])]),a("br"),a("div",[a("span",{staticClass:"time"},[t._v(t._s(t.handleFormatDateMinuteSec(e["created_at"])))])])],1)})),a("myPage",{attrs:{currentPage:t.currentPage,maxPage:t.maxPage},on:{pageTurning:t.pageTurning}})],2),a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-date"}),t._v(" 修改头像")]),a("el-tag",[a("i",{staticClass:"el-icon-warning"}),t._v("点击更换头像")]),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.actionUrl,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"http-request":t.httpRequest,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-date"}),t._v(" 修改信息")]),a("el-main",[a("el-form",{ref:"userInfo",attrs:{model:t.userInfo,"status-icon":"",rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.userInfo.nick,callback:function(e){t.$set(t.userInfo,"nick",e)},expression:"userInfo.nick"}})],1),a("el-form-item",{attrs:{label:"手机",prop:"phone"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.userInfo.phone,callback:function(e){t.$set(t.userInfo,"phone",e)},expression:"userInfo.phone"}})],1),a("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.userInfo.email,callback:function(e){t.$set(t.userInfo,"email",e)},expression:"userInfo.email"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("userInfo")}}},[t._v("提交")])],1)],1)],1)],1)],1)],1)])]),a("myFooter")],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"me-wrapper"},[n("img",{staticClass:"bg",attrs:{src:a("99e4"),alt:""}})])}],r=a("2909"),i=a("10f0"),o=a("9fe9"),l=a("3e51"),c=a("eeb9"),u={name:"Issue",components:{myNav:i["a"],myFooter:o["a"],myPage:l["a"]},data:function(){var t=function(t,e,a){""===e?a(new Error("请输入用户名")):e.length<6||e.length>16?a(new Error("请输入4到16位字符")):a()},e=function(t,e,a){""===e?a(new Error("请输入电话号码")):e.length<6||e.length>16?a(new Error("请输入4到16位字符")):a()},a=function(t,e,a){""===e?a(new Error("请输入邮箱")):e.length<6||e.length>16?a(new Error("请输入4到16位字符")):a()};return{actionUrl:"/api/v1/users/avatar?",fileReader:"",ceiling:!1,userData:[],personIssueData:[],first:!0,loading:!0,currentPage:"",maxPage:"",isNoQuestionData:"",imageUrl:"",userId:"",userInfo:{nick:"",phone:"",email:"",avatar:""},rules:{nick:[{validator:t,trigger:"blur"}],phone:[{validator:e,trigger:"blur"}],email:[{validator:a,trigger:"blur"}]}}},created:function(){this.listenScroll(),this.getUserData(),this.getIssuePersonData(1)},mounted:function(){this.fileReader=new FileReader},methods:{httpRequest:function(t){var e=this,a=this,n=t.file;n&&this.fileReader.readAsDataURL(n),this.fileReader.onload=function(){var t=e.fileReader.result;console.log(t),c["a"].post("/v1/users/avatar?",{img:t}).then((function(t){a.$elementMessage("更新成功","success"),location.reload()})).catch((function(t){a.$elementMessage("网络错误请联系管理员","warning")}))}},pageTurning:function(t){switch(t){case"prevPage":return void this.getIssuePersonData(this.currentPage-1);case"nextPage":return void this.getIssuePersonData(this.currentPage+1);default:return}},listenScroll:function(){var t=this;window.onscroll=function(){document.documentElement.scrollTop>0?t.ceiling=!0:t.ceiling=!1}},getUserData:function(){var t=this;this.loading=!0,c["a"].get("/v1/users?").then((function(e){t.userInfo=e.data,t.userId=t.userInfo["id"],t.imageUrl=t.userInfo["avatar"]}),(function(){t.loading=!1}))},getIssuePersonData:function(t){var e=this;this.loading=!0,c["a"].get("/v1/issues/person?perPage=5&page="+t).then((function(t){var a=t.data;e.personIssueData=Object(r["a"])(a["items"]),e.currentPage=a["_meta"]["currentPage"],e.maxPage=a["_meta"]["pageCount"],e.loading=!1}),(function(){e.loading=!1}))},handleFormatDateMinuteSec:function(t){var e=new Date(1e3*t);return void 0===t?"":"".concat(e.getFullYear(),"-").concat(e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1),"-").concat(e.getDate()>=10?e.getDate():"0"+e.getDate()," ").concat(e.getHours()>=10?e.getHours():"0"+e.getHours(),":").concat(e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),":").concat(e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds())},scrollTo800:function(){window.scrollTo(0,800)},handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a},submitForm:function(t){var e=this,a=this;this.$refs[t].validate((function(t){if(!t)return alert("有信息填写错误请重新填写"),!1;c["a"].put("/v1/users/"+a.userId+"?",{nick:e.userInfo.nick,phone:e.userInfo.phone,email:e.userInfo.email}).then((function(t){200===t.status?a.$elementMessage("修改成功","success"):a.$elementMessage("网络错误请联系管理员","warning")})).catch((function(t){a.$elementMessage(t.message,"warning")}))}))}}},g=u,f=(a("12f8"),a("2877")),p=Object(f["a"])(g,n,s,!1,null,"372a05ac",null);e["default"]=p.exports},"10f0":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{ceiling:t.ceiling},attrs:{id:"nav"}},[a("el-row",[a("el-col",{attrs:{xs:0,sm:3,md:3,lg:3,xl:3}},[a("div",{staticClass:"Non-existent"},[a("p",[t._v("占位符")])])]),a("el-col",{attrs:{xs:24,sm:18,md:18,lg:18,xl:18}},[a("div",{attrs:{id:"app_nav"}},[a("ul",{attrs:{id:"app_nav_ul"}},[t.isLoginStatus?a("li",{staticClass:"app_nav_li"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.loginOut()}}},[t._v("退  出")])]):a("li",{staticClass:"app_nav_li"},[a("router-link",{attrs:{to:"/login"}},[t._v("登  录")])],1),a("li",{staticClass:"app_nav_li active"},[a("router-link",{attrs:{to:"/"}},[t._v("主  页")])],1),a("li",{staticClass:"app_nav_li"},[a("router-link",{attrs:{to:"/class"}},[t._v("分  类")])],1),a("li",{staticClass:"app_nav_li"},[a("router-link",{attrs:{to:"/issue"}},[t._v("问  答")])],1),t.isLoginStatus?a("li",{staticClass:"app_nav_li"},[a("router-link",{attrs:{to:"/me"}},[t._v("我  的")])],1):t._e(),a("li",{staticClass:"app_nav_li"},[a("router-link",{attrs:{to:"/about"}},[t._v("关  于")])],1),a("li",{staticClass:"app_nav_li"},[a("router-link",{attrs:{to:"/reward"}},[t._v("打  赏")])],1)])])]),a("el-col",{attrs:{xs:0,sm:3,md:3,lg:3,xl:3}},[a("div",{staticClass:"Non-existent"},[a("p",[t._v("占位符")])])])],1)],1)},s=[],r={props:["ceiling"],data:function(){return{isLoginStatus:!1}},methods:{isLogin:function(){var t=localStorage.getItem("access_token");null!==t&&(this.isLoginStatus=!0)},loginOut:function(){localStorage.removeItem("access_token");var t=localStorage.getItem("access_token");null===t&&(this.isLoginStatus=!1)}},created:function(){this.isLogin()}},i=r,o=(a("6a58"),a("2877")),l=Object(o["a"])(i,n,s,!1,null,"513753c7",null);e["a"]=l.exports},"12f8":function(t,e,a){"use strict";a("8452")},"14e98":function(t,e,a){"use strict";a("d102")},"158a":function(t,e,a){"use strict";a("1e49")},"1e49":function(t,e,a){},2909:function(t,e,a){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function s(t){if(Array.isArray(t))return n(t)}function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function i(t,e){if(t){if("string"===typeof t)return n(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(t,e):void 0}}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return s(t)||r(t)||i(t)||o()}a.d(e,"a",(function(){return l}))},"3e51":function(t,e,a){"use strict";var n=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",{staticClass:"page"},[n("span",{class:{"page-button":!0,hide:1===e.currentPage},on:{click:function(){t.$emit("pageTurning","prevPage")}}},[e._v("← 上一页 ")]),n("span",[e._v(" Page "+e._s(e.currentPage)+" of "+e._s(e.maxPage)+" ")]),n("span",{class:{"page-button":!0,hide:e.maxPage===e.currentPage},on:{click:function(){t.$emit("pageTurning","nextPage")}}},[e._v("下一页 →")])])},s=[],r={name:"page",props:["currentPage","maxPage"]},i=r,o=(a("14e98"),a("2877")),l=Object(o["a"])(i,n,s,!1,null,"58df3e12",null);e["a"]=l.exports},"6a58":function(t,e,a){"use strict";a("d904")},8452:function(t,e,a){},"99e4":function(t,e,a){t.exports=a.p+"img/smalllufei.bea84179.jpg"},"9fe9":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",[a("span",{staticClass:"footer-left"},[a("a",{attrs:{href:"https://beian.miit.gov.cn"}},[t._v("© 2020 mhd97.top 版权所有 桂ICP备18009232号-1")])]),a("span",{staticClass:"footer-right"},[t._v("\n        Proudly Made By\n        "),a("a",{attrs:{href:"https://github.com/mohuidong/Mhd97.Blog.vue"}},[t._v("MoHuiDong(914685196@qq.com)")])])])}],r={name:"myFooter",data:function(){return{footerData:[]}}},i=r,o=(a("158a"),a("2877")),l=Object(o["a"])(i,n,s,!1,null,"366015c7",null);e["a"]=l.exports},d102:function(t,e,a){},d904:function(t,e,a){}}]);
//# sourceMappingURL=chunk-7f5cf57c.fbb194a4.js.map