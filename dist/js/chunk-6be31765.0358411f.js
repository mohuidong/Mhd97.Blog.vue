(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6be31765"],{"04a9":function(t,e,n){},"10f0":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{ceiling:t.ceiling},attrs:{id:"nav"}},[n("el-row",[n("el-col",{attrs:{xs:0,sm:3,md:3,lg:3,xl:3}},[n("div",{staticClass:"Non-existent"},[n("p",[t._v("占位符")])])]),n("el-col",{attrs:{xs:24,sm:18,md:18,lg:18,xl:18}},[n("div",{attrs:{id:"app_nav"}},[n("ul",{attrs:{id:"app_nav_ul"}},[t.isLoginStatus?n("li",{staticClass:"app_nav_li"},[n("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.loginOut()}}},[t._v("退  出")])]):n("li",{staticClass:"app_nav_li"},[n("router-link",{attrs:{to:"/login"}},[t._v("登  录")])],1),n("li",{staticClass:"app_nav_li active"},[n("router-link",{attrs:{to:"/"}},[t._v("主  页")])],1),n("li",{staticClass:"app_nav_li"},[n("router-link",{attrs:{to:"/class"}},[t._v("分  类")])],1),n("li",{staticClass:"app_nav_li"},[n("router-link",{attrs:{to:"/issue"}},[t._v("问  答")])],1),t.isLoginStatus?n("li",{staticClass:"app_nav_li"},[n("router-link",{attrs:{to:"/me"}},[t._v("我  的")])],1):t._e(),n("li",{staticClass:"app_nav_li"},[n("router-link",{attrs:{to:"/about"}},[t._v("关  于")])],1),n("li",{staticClass:"app_nav_li"},[n("router-link",{attrs:{to:"/reward"}},[t._v("打  赏")])],1)])])]),n("el-col",{attrs:{xs:0,sm:3,md:3,lg:3,xl:3}},[n("div",{staticClass:"Non-existent"},[n("p",[t._v("占位符")])])])],1)],1)},s=[],i={props:["ceiling"],data:function(){return{isLoginStatus:!1}},methods:{isLogin:function(){var t=localStorage.getItem("access_token");null!==t&&(this.isLoginStatus=!0)},loginOut:function(){localStorage.removeItem("access_token");var t=localStorage.getItem("access_token");null===t&&(this.isLoginStatus=!1)}},created:function(){this.isLogin()}},r=i,o=(n("6a58"),n("2877")),l=Object(o["a"])(r,a,s,!1,null,"513753c7",null);e["a"]=l.exports},"158a":function(t,e,n){"use strict";n("1e49")},"1e49":function(t,e,n){},2909:function(t,e,n){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function s(t){if(Array.isArray(t))return a(t)}function i(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function r(t,e){if(t){if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return s(t)||i(t)||r(t)||o()}n.d(e,"a",(function(){return l}))},"2e9b":function(t,e,n){},"3ad6":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"article"},[n("myNav",{attrs:{ceiling:t.ceiling}}),n("div",{staticClass:"bg",style:{backgroundImage:"url("+t.img+")"}}),n("main",[n("div",{staticClass:"title"},[n("h3",[t._v(t._s(t.title))]),n("div",{staticClass:"time"},[t._v(t._s(t.time))])]),n("div",{staticClass:"content",domProps:{innerHTML:t._s(t.content)}}),n("div",{staticClass:"article-reply"},[n("div",{staticClass:"reply-header"},[n("h1",[t._v("评论 "),n("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){return t.likesUp()}}},[t.isLikes?n("span",[t._v("已点赞"+t._s(t.likes))]):n("span",[t._v("点赞"+t._s(t.likes))])])],1)]),n("div",{staticClass:"reply-body"},[t._l(t.reply,(function(e){return n("ul",{key:e["reply_id"],staticClass:"reply-list"},[n("li",{staticClass:"reply-item"},[n("span",{staticClass:"name"},[t._v(t._s(e["userName"]))]),t._v("\n                        |\n                        "),n("span",{staticClass:"time"},[t._v(t._s(t.handleFormatDateMinuteSec(e["created_at"])))]),n("br"),n("p",[t._v(t._s(e["content"]))])])])})),n("div",{staticClass:"reply-input"},[n("el-form",{ref:"sendReply",attrs:{"label-width":"80px",model:t.sendReply,"status-icon":"",rules:t.rules}},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",autosize:{minRows:3,maxRows:10}},model:{value:t.sendReply.replyContent,callback:function(e){t.$set(t.sendReply,"replyContent",e)},expression:"sendReply.replyContent"}}),n("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.submitForm("sendReply")}}},[t._v("提交")])],1)],1)],2)])]),n("myFooter")],1)},s=[],i=n("2909"),r=n("10f0"),o=n("9fe9"),l=n("eeb9"),c={name:"Article",components:{myNav:r["a"],myFooter:o["a"]},data:function(){var t=function(t,e,n){""===e?n(new Error("请输入用户名")):e.length>55?n(new Error("请输入不超过55位字符")):n()};return{ceiling:!1,img:"",title:"",time:"",content:"",likes:"",loading:!0,textArea:"",isLikes:!1,sendReply:{replyContent:""},reply:[],rules:{replyContent:[{validator:t,trigger:"blur"}]}}},created:function(){var t=this;this.listenScroll(),this.getData(1),this.isLikesUp(),l["a"].get("/v1/posts/"+this.$route.params["id"]+"?").then((function(e){var n=e.data;t.img=n["label_img"],t.title=n["title"],t.time=t.handleFormatDateMinuteSec(n["created_at"]),t.content=n["content"],t.likes=n["likes"],t.loading=!1}),(function(){t.loading=!1}))},methods:{listenScroll:function(){var t=this;window.onscroll=function(){document.documentElement.scrollTop>0?t.ceiling=!0:t.ceiling=!1}},handleFormatDateMinuteSec:function(t){var e=new Date(1e3*t);return void 0===t?"":"".concat(e.getFullYear(),"-").concat(e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1),"-").concat(e.getDate()>=10?e.getDate():"0"+e.getDate()," ").concat(e.getHours()>=10?e.getHours():"0"+e.getHours(),":").concat(e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),":").concat(e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds())},getData:function(t){var e=this;this.loading=!0,l["a"].get("/v1/replies/"+this.$route.params["id"]+"?perPage=5&page="+t).then((function(t){var n=t.data;e.reply=Object(i["a"])(n["items"]),e.currentPage=n["_meta"]["currentPage"],e.maxPage=n["_meta"]["pageCount"],e.loading=!1,e.first=!1}),(function(t){e.loading=!1,e.first=!1}))},likesUp:function(){var t=this;l["a"].post("/v1/posts/likes?id="+this.$route.params["id"]).then((function(e){1===e.data.likes_status?(t.likes+=1,t.isLikes=!0,t.$elementMessage("感谢大佬的肯定","success")):2===e.data.likes_status&&(t.likes-=1,t.isLikes=!1,t.$elementMessage("这真是一个该死的消息","info"))}),(function(e){401===e.data.status?t.$elementMessage("请先登陆","warning"):t.$elementMessage("操作失败请联系管理员","warning")}))},isLikesUp:function(){var t=this,e=localStorage.getItem("access_token");null!==e&&l["a"].get("/v1/likes/"+this.$route.params["id"]+"?").then((function(e){1===e.data.status&&(t.isLikes=!0)}),(function(e){t.$elementMessage("出现一点小问题","warning")}))},submitForm:function(t){var e=this,n=this;this.$refs[t].validate((function(t){if(!t)return alert("有信息填写错误请重新填写"),!1;l["a"].post("/v1/replies?id="+e.$route.params["id"],{replyContent:e.sendReply.replyContent}).then((function(t){200===t.status?(n.$elementMessage("评论成功","success"),location.reload()):n.$elementMessage("网络错误请联系管理员","warning")})).catch((function(t){n.$elementMessage("评论失败","warning")}))}))}}},u=c,p=(n("4935"),n("d24b"),n("2877")),d=Object(p["a"])(u,a,s,!1,null,"52a98b9c",null);e["default"]=d.exports},4935:function(t,e,n){"use strict";n("04a9")},"6a58":function(t,e,n){"use strict";n("d904")},"9fe9":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",[n("span",{staticClass:"footer-left"},[n("a",{attrs:{href:"https://beian.miit.gov.cn"}},[t._v("© 2020 mhd97.top 版权所有 桂ICP备18009232号-1")])]),n("span",{staticClass:"footer-right"},[t._v("\n        Proudly Made By\n        "),n("a",{attrs:{href:"https://github.com/mohuidong/Mhd97.Blog.vue"}},[t._v("MoHuiDong(914685196@qq.com)")])])])}],i={name:"myFooter",data:function(){return{footerData:[]}}},r=i,o=(n("158a"),n("2877")),l=Object(o["a"])(r,a,s,!1,null,"366015c7",null);e["a"]=l.exports},d24b:function(t,e,n){"use strict";n("2e9b")},d904:function(t,e,n){}}]);
//# sourceMappingURL=chunk-6be31765.0358411f.js.map