(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33b75b43"],{"00ab":function(t,e,a){"use strict";var n=a("d87e"),r=a.n(n);r.a},"0a99":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"Me"},[a("myNav",{attrs:{ceiling:t.ceiling}}),t._m(0),a("main",[a("div",{staticClass:"myInfo"},[a("h1",[t._v("我的信息")]),a("div",{staticClass:"MyInfo"},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-date"}),t._v(" 我的提问")]),t._l(t.personIssueData,(function(e){return a("article",{key:e["id"]},[a("router-link",{attrs:{to:"/question/"+e["id"]}},[a("h5",[1==e.status?a("span",[a("i",{staticClass:"el-icon-warning"})]):2==e.status?a("span",[a("i",{staticClass:"el-icon-error"})]):3==e.status?a("span",[a("i",{staticClass:"el-icon-success"})]):t._e(),t._v("\n                                    "+t._s(e["question"])+"\n                                ")])]),a("br"),a("div",[a("span",{staticClass:"time"},[t._v(t._s(t.handleFormatDateMinuteSec(e["created_at"])))])])],1)})),a("myPage",{attrs:{currentPage:t.currentPage,maxPage:t.maxPage},on:{pageTurning:t.pageTurning}})],2),a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-date"}),t._v(" 修改头像")]),a("el-tag",[a("i",{staticClass:"el-icon-warning"}),t._v("点击更换头像")]),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.actionUrl,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"http-request":t.httpRequest,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-date"}),t._v(" 修改信息")]),a("el-main",[a("el-form",{ref:"userInfo",attrs:{model:t.userInfo,"status-icon":"",rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.userInfo.nick,callback:function(e){t.$set(t.userInfo,"nick",e)},expression:"userInfo.nick"}})],1),a("el-form-item",{attrs:{label:"手机",prop:"phone"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.userInfo.phone,callback:function(e){t.$set(t.userInfo,"phone",e)},expression:"userInfo.phone"}})],1),a("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.userInfo.email,callback:function(e){t.$set(t.userInfo,"email",e)},expression:"userInfo.email"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("userInfo")}}},[t._v("提交")])],1)],1)],1)],1)],1)],1)])]),a("myFooter")],1)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"me-wrapper"},[n("img",{staticClass:"bg",attrs:{src:a("99e4"),alt:""}})])}],s=a("75fc"),i=a("10f0"),o=a("9fe9"),c=a("3e51"),l=a("eeb9"),u={name:"Issue",components:{myNav:i["a"],myFooter:o["a"],myPage:c["a"]},data:function(){var t=function(t,e,a){""===e?a(new Error("请输入用户名")):e.length<6||e.length>16?a(new Error("请输入4到16位字符")):a()},e=function(t,e,a){""===e?a(new Error("请输入电话号码")):e.length<6||e.length>16?a(new Error("请输入4到16位字符")):a()},a=function(t,e,a){""===e?a(new Error("请输入邮箱")):e.length<6||e.length>16?a(new Error("请输入4到16位字符")):a()};return{actionUrl:"/api/v1/users/avatar?",fileReader:"",ceiling:!1,userData:[],personIssueData:[],first:!0,loading:!0,currentPage:"",maxPage:"",isNoQuestionData:"",imageUrl:"",userId:"",userInfo:{nick:"",phone:"",email:"",avatar:""},rules:{nick:[{validator:t,trigger:"blur"}],phone:[{validator:e,trigger:"blur"}],email:[{validator:a,trigger:"blur"}]}}},created:function(){this.listenScroll(),this.getUserData(),this.getIssuePersonData(1)},mounted:function(){this.fileReader=new FileReader},methods:{httpRequest:function(t){var e=this,a=this,n=t.file;n&&this.fileReader.readAsDataURL(n),this.fileReader.onload=function(){var t=e.fileReader.result;console.log(t),l["a"].post("/v1/users/avatar?",{img:t}).then((function(t){a.$elementMessage("更新成功","success"),location.reload()})).catch((function(t){a.$elementMessage("网络错误请联系管理员","warning")}))}},pageTurning:function(t){switch(t){case"prevPage":return void this.getIssuePersonData(this.currentPage-1);case"nextPage":return void this.getIssuePersonData(this.currentPage+1);default:return}},listenScroll:function(){var t=this;window.onscroll=function(){document.documentElement.scrollTop>0?t.ceiling=!0:t.ceiling=!1}},getUserData:function(){var t=this;this.loading=!0,l["a"].get("/v1/users?").then((function(e){t.userInfo=e.data,t.userId=t.userInfo["id"],t.imageUrl=t.userInfo["avatar"]}),(function(){t.loading=!1}))},getIssuePersonData:function(t){var e=this;this.loading=!0,l["a"].get("/v1/issues/person?perPage=5&page="+t).then((function(t){var a=t.data;e.personIssueData=Object(s["a"])(a["items"]),e.currentPage=a["_meta"]["currentPage"],e.maxPage=a["_meta"]["pageCount"],e.loading=!1}),(function(){e.loading=!1}))},handleFormatDateMinuteSec:function(t){var e=new Date(1e3*t);return void 0===t?"":"".concat(e.getFullYear(),"-").concat(e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1),"-").concat(e.getDate()>=10?e.getDate():"0"+e.getDate()," ").concat(e.getHours()>=10?e.getHours():"0"+e.getHours(),":").concat(e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes(),":").concat(e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds())},scrollTo800:function(){window.scrollTo(0,800)},handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a},submitForm:function(t){var e=this,a=this;this.$refs[t].validate((function(t){if(!t)return alert("有信息填写错误请重新填写"),!1;l["a"].put("/v1/users/"+a.userId+"?",{nick:e.userInfo.nick,phone:e.userInfo.phone,email:e.userInfo.email}).then((function(t){200===t.status?a.$elementMessage("修改成功","success"):a.$elementMessage("网络错误请联系管理员","warning")})).catch((function(t){a.$elementMessage(t.message,"warning")}))}))}}},f=u,g=(a("7c06"),a("2877")),p=Object(g["a"])(f,n,r,!1,null,"bcd75278",null);e["default"]=p.exports},"10f0":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{ceiling:t.ceiling},attrs:{id:"nav"}},[a("el-row",[a("el-col",{attrs:{xs:0,sm:3,md:3,lg:3,xl:3}},[a("div",{staticClass:"Non-existent"},[a("p",[t._v("占位符")])])]),a("el-col",{attrs:{xs:24,sm:18,md:18,lg:18,xl:18}},[a("div",{attrs:{id:"app_nav"}},[a("ul",{attrs:{id:"app_nav_ul"}},[t.isLoginStatus?a("li",{staticClass:"app_nav_li"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.loginOut()}}},[t._v("退  出")])]):a("li",{staticClass:"app_nav_li"},[a("router-link",{attrs:{to:"/login"}},[t._v("登  录")])],1),a("li",{staticClass:"app_nav_li active"},[a("router-link",{attrs:{to:"/MyHome"}},[t._v("主  页")])],1),a("li",{staticClass:"app_nav_li"},[a("router-link",{attrs:{to:"/class"}},[t._v("分  类")])],1),a("li",{staticClass:"app_nav_li"},[a("router-link",{attrs:{to:"/issue"}},[t._v("问  答")])],1),t.isLoginStatus?a("li",{staticClass:"app_nav_li"},[a("router-link",{attrs:{to:"/me"}},[t._v("我  的")])],1):t._e(),a("li",{staticClass:"app_nav_li"},[a("router-link",{attrs:{to:"/about"}},[t._v("关  于")])],1),a("li",{staticClass:"app_nav_li"},[a("router-link",{attrs:{to:"/reward"}},[t._v("打  赏")])],1)])])]),a("el-col",{attrs:{xs:0,sm:3,md:3,lg:3,xl:3}},[a("div",{staticClass:"Non-existent"},[a("p",[t._v("占位符")])])])],1)],1)},r=[],s={props:["ceiling"],data:function(){return{isLoginStatus:!1}},methods:{isLogin:function(){var t=localStorage.getItem("access_token");null!==t&&(this.isLoginStatus=!0)},loginOut:function(){localStorage.removeItem("access_token");var t=localStorage.getItem("access_token");null===t&&(this.isLoginStatus=!1)}},created:function(){this.isLogin()}},i=s,o=(a("7a2a"),a("2877")),c=Object(o["a"])(i,n,r,!1,null,"0b97db96",null);e["a"]=c.exports},1309:function(t,e,a){},1406:function(t,e,a){},"1af6":function(t,e,a){var n=a("63b6");n(n.S,"Array",{isArray:a("9003")})},"20fd":function(t,e,a){"use strict";var n=a("d9f6"),r=a("aebd");t.exports=function(t,e,a){e in t?n.f(t,e,r(0,a)):t[e]=a}},3702:function(t,e,a){var n=a("481b"),r=a("5168")("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||s[r]===t)}},"3e51":function(t,e,a){"use strict";var n=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",{staticClass:"page"},[n("span",{class:{"page-button":!0,hide:1===e.currentPage},on:{click:function(){t.$emit("pageTurning","prevPage")}}},[e._v("← 上一页 ")]),n("span",[e._v(" Page "+e._s(e.currentPage)+" of "+e._s(e.maxPage)+" ")]),n("span",{class:{"page-button":!0,hide:e.maxPage===e.currentPage},on:{click:function(){t.$emit("pageTurning","nextPage")}}},[e._v("下一页 →")])])},r=[],s={name:"page",props:["currentPage","maxPage"]},i=s,o=(a("cf33"),a("2877")),c=Object(o["a"])(i,n,r,!1,null,"4c6b9cfd",null);e["a"]=c.exports},"40c3":function(t,e,a){var n=a("6b4c"),r=a("5168")("toStringTag"),s="Arguments"==n(function(){return arguments}()),i=function(t,e){try{return t[e]}catch(a){}};t.exports=function(t){var e,a,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(a=i(e=Object(t),r))?a:s?n(e):"Object"==(o=n(e))&&"function"==typeof e.callee?"Arguments":o}},"4ee1":function(t,e,a){var n=a("5168")("iterator"),r=!1;try{var s=[7][n]();s["return"]=function(){r=!0},Array.from(s,(function(){throw 2}))}catch(i){}t.exports=function(t,e){if(!e&&!r)return!1;var a=!1;try{var s=[7],o=s[n]();o.next=function(){return{done:a=!0}},s[n]=function(){return o},t(s)}catch(i){}return a}},"549b":function(t,e,a){"use strict";var n=a("d864"),r=a("63b6"),s=a("241e"),i=a("b0dc"),o=a("3702"),c=a("b447"),l=a("20fd"),u=a("7cd6");r(r.S+r.F*!a("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var e,a,r,f,g=s(t),p="function"==typeof this?this:Array,v=arguments.length,d=v>1?arguments[1]:void 0,m=void 0!==d,h=0,b=u(g);if(m&&(d=n(d,v>2?arguments[2]:void 0,2)),void 0==b||p==Array&&o(b))for(e=c(g.length),a=new p(e);e>h;h++)l(a,h,m?d(g[h],h):g[h]);else for(f=b.call(g),a=new p;!(r=f.next()).done;h++)l(a,h,m?i(f,d,[r.value,h],!0):r.value);return a.length=h,a}})},"54a1":function(t,e,a){a("6c1c"),a("1654"),t.exports=a("95d5")},"75fc":function(t,e,a){"use strict";a.d(e,"a",(function(){return g}));var n=a("a745"),r=a.n(n);function s(t){if(r()(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}var i=a("774e"),o=a.n(i),c=a("c8bb"),l=a.n(c);function u(t){if(l()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return o()(t)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function g(t){return s(t)||u(t)||f()}},"774e":function(t,e,a){t.exports=a("d2d5")},"7a2a":function(t,e,a){"use strict";var n=a("1406"),r=a.n(n);r.a},"7c06":function(t,e,a){"use strict";var n=a("1309"),r=a.n(n);r.a},"7cd6":function(t,e,a){var n=a("40c3"),r=a("5168")("iterator"),s=a("481b");t.exports=a("584a").getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||s[n(t)]}},"7d54":function(t,e,a){},"95d5":function(t,e,a){var n=a("40c3"),r=a("5168")("iterator"),s=a("481b");t.exports=a("584a").isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||s.hasOwnProperty(n(e))}},"99e4":function(t,e,a){t.exports=a.p+"img/smalllufei.bea84179.jpg"},"9fe9":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",[a("span",{staticClass:"footer-left"},[a("a",{attrs:{href:"javascript:;"}},[t._v("Mhd97.top")]),a("a",{attrs:{href:"https://beian.miit.gov.cn"}},[t._v("   © 2020 mhd97.top 版权所有 桂ICP备18009232号-1")])]),a("span",{staticClass:"footer-right"},[t._v("\n        Proudly Made By\n        "),a("a",{attrs:{href:"javascript:;"}},[t._v("Mohuidong")])])])}],s={name:"myFooter",data:function(){return{footerData:[]}}},i=s,o=(a("00ab"),a("2877")),c=Object(o["a"])(i,n,r,!1,null,"22e8897b",null);e["a"]=c.exports},a745:function(t,e,a){t.exports=a("f410")},b0dc:function(t,e,a){var n=a("e4ae");t.exports=function(t,e,a,r){try{return r?e(n(a)[0],a[1]):e(a)}catch(i){var s=t["return"];throw void 0!==s&&n(s.call(t)),i}}},c8bb:function(t,e,a){t.exports=a("54a1")},cf33:function(t,e,a){"use strict";var n=a("7d54"),r=a.n(n);r.a},d2d5:function(t,e,a){a("1654"),a("549b"),t.exports=a("584a").Array.from},d87e:function(t,e,a){},f410:function(t,e,a){a("1af6"),t.exports=a("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-33b75b43.40c1c6f1.js.map